#summary How to upgrade your CORE installation

= Preferences and Settings =
CORE preferences are kept in the `~/.core` file. Sometimes upgrading from one version to another causes an incompatibility between versions. You can safely remove this file to avoid conflicts.

Other CORE settings are saved in `/etc/core/plugins.conf` and `/etc/core/servers.conf` (`/usr/local/etc/core/*` on FreeBSD).

Be sure to save any configuration files you may have saved from the system-wide directory `/usr/local/lib/core/configs`. Starting with version 3.4, CORE uses a default configuration file path of `/etc/core/configs` (`/usr/local/etc/core/configs` on FreeBSD).

= FreeBSD upgrade =
Use the `pkg_add` and `pkg_remove` FreeBSD utilities to remove the old CORE packages and install the new ones.

== Upgrading CORE 3.3 to 3.4 ==
  # First back up any configuration files that you want to keep!
{{{
tar czvf ~/my-important-configs.tgz /usr/local/lib/core/configs
}}}
  # You can list which CORE packages are currently installed:
{{{
pkg_info -Ex core
}}}
  # Use `pkg_delete` to remove the old CORE packages:
{{{
pkg_delete core-span-1.3
pkg_delete core-wlan-1.3
pkg_delete core-3.3
pkg_delete core-kernel-7.0-20081015a
}}}
  # Install the new packages (note: warnings about different dependency package versions may be ignored):
{{{
pkg_add core-7.x-3.4.tbz
pkg_add core-kernel-7.x-20090505.tbz
}}}
  # Update the quagga-manetmdr package if it has changed:
{{{
pkg_info -Ex quagga
pkg_delete quagga-manetmdr-0.99.9_1
pkg_add quagga-manetmdr-0.99.9_5.tbz
}}}
  # Reboot to the new kernel, and you are ready to start using the new version of CORE.

= Linux upgrade =
Use the RPM package manager to uninstall the old packages and install the ones.
  # Save any configuration files you may have. Note that installing a new core-root package will cause any changes to your old core-root to be lost (for example, if you installed new programs in the root image).
  # List which CORE packages you have installed:
{{{
rpm -qa core
rpm -qa core-root
}}}
  # Remove the old CORE RPMs:
{{{
rpm -e core-3.3-1
rpm -e core-root-3.3-1
}}}
  # Install the new RPMs:
{{{
rpm -ivh core-3.4-1.i386.rpm
rpm -ivh core-root-3.4-1.i386.rpm
}}}
  # You may need to rebuild the container configs in `/etc/vz/conf` if the `ve-core.conf-sample` file has changed. If you remove the old containers, CORE will build new ones as needed. Here is an example:
{{{
# careful! first check what these commands will delete
rm -f /etc/vz/conf/10*.conf
rm -f /etc/vz/conf/10*.mount
rm -f /vz/private/10*
}}}